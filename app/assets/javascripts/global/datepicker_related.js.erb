/**
 * Everything related to the datepicker goes here.
 * The javascript of the datepicker is included as gem.
 */

/**
 * Adds date pickers to every input field of the class "date_picker"
 */
function initializeDatePickers() {
	$(".date_picker").each(function() {
		addDatePicker(this.id);
	});
}

/**
 * Adds a date picker to the field with the given id
 * The format of the date picker is DD.MM.YYYY (eg 15.04.2011)
 * @param id the id of the field you want to add a datepicker
 */
function addDatePicker(id) {
    // We need to map locale to the matching locale in datepicker.
    var regionals = {'de': 'de', 'fr': 'fr-CH', 'en': 'en-GB', 'it': 'it' }
    var regional =  regionals[locale];
    $("#"+id).datepicker("option", $.datepicker.regional[regional]);

	$("#"+id).datepicker({
		minDate: "-124Y", 
		maxDate: "+0D",
		firstDay: 1,
		dateFormat: "dd.mm.yy",
		changeYear: true,
		yearRange: "-124:+0",
		showOn: "both",
		buttonImage: "<%= asset_data_uri 'cal.gif' %>",
		buttonText: I18n.t("simple_form.hints.webgrouper_patient_case.pick_date"),
		buttonImageOnly: true
		}
	);
}

