.diagnoses_row
  .sameline
    - 5.times do |i|
      %span.field
        = autocomplete_field_tag "webgrouper_patient_case[diagnoses][]",
                          '',
                          autocomplete_Icd_code_webgrouper_patient_cases_path(:system_id => @webgrouper_patient_case.system_id),
                          :class => 'autocomplete small_field diagnosis',
                          :id => "webgrouper_patient_case_diagnoses_#{i}"
        %span.spacer
        %span.splitter
    .spacer
    .diagnoses_buttons
      = image_tag('bullet_toggle_plus.png',  id: 'add_diagnoses_row')
      = image_tag('bullet_toggle_minus.png', id: 'remove_diagnoses_row')
:javascript
  var diagnoses_array = #{@webgrouper_patient_case.diagnoses.to_json};
  initialize_diagnoses(diagnoses_array);